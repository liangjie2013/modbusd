machine:
  services:
    - docker

dependencies:
  override:
    - sudo apt-get install python-dev libxml2-dev libxslt-dev -y
    - sudo pip install --upgrade docker-compose==1.4.2

test:
  pre:
    - docker build --no-cache=true --build-arg MB=`(cat /etc/mb)` -t edgepro/modbusd:x86 -f Dockerfile.alpine .
    - docker-compose pull
    - docker-compose build
  override:
    - docker-compose up
  post:
    - docker stop $(docker ps -a -q)